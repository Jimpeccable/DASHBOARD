<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jimpeccable's Patreon Projects Dashboard</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Poppins:wght@700&display=swap" rel="stylesheet">
</head>
<body>
    <div id="vanta-background"></div>

    <div class="dashboard-wrapper">
        <header class="top-bar">
            <div class="header-content">
                <h1>Jimpeccable's Patreon Dashboard</h1>
                <p class="tagline">A glorious showcase of my D&D creations and tools, designed to enhance your campaigns.</p>
            </div>
            <nav class="quick-nav">
                <a href="#premium-resources"><i class="fas fa-crown"></i> Member Exclusive</a>
                <a href="#free-resources"><i class="fas fa-gift"></i> Free Content</a>
            </nav>
        </header>

        <div class="main-grid">
            <aside class="sidebar">
                <h3>Patreon Collections</h3>
                <ul>
                    <li><a href="https://www.patreon.com/collection/1600298?view=expanded" target="_blank"><i class="fas fa-tools"></i> D&D Tools</a></li>
                    <li><a href="https://www.patreon.com/collection/1560641?view=expanded" target="_blank"><i class="fas fa-palette"></i> Tokens & Art</a></li>
                    <li><a href="https://www.patreon.com/collection/1555473?view=expanded" target="_blank"><i class="fas fa-owl"></i> Owlbear Rodeo</a></li>
                    <li><a href="https://www.patreon.com/collection/1555472?view=expanded" target="_blank"><i class="fas fa-dice-d20"></i> Foundry VTT</a></li>
                    <li><a href="https://www.patreon.com/collection/1555484?view=expanded" target="_blank"><i class="fas fa-skull"></i> Curse of Strahd</a></li>
                    <li><a href="https://www.patreon.com/collection/1555475?view=expanded" target="_blank"><i class="fas fa-mountain"></i> Icewind Dale</a></li>
                </ul>
            </aside>

            <div class="content-area">
                <section class="monthly-code-section card">
                    <div class="section-title-container">
                        <i class="fas fa-key"></i>
                        <h2>This Month's Exclusive Code</h2>
                    </div>
                    <p class="code-explanation">
                        As a valued patron, use this code to unlock premium features and content across my projects.
                        This code refreshes automatically at the start of each month.
                    </p>
                    <div class="code-display" id="monthlyCodeDisplay">
                        Loading Code...
                    </div>
                    <button class="button button-warning code-copy-button" onclick="copyCode()">
                        <i class="far fa-copy"></i> Copy Code
                    </button>
                </section>

                <hr class="section-divider">

                <section id="premium-resources" class="paid-resources-section card">
                    <div class="section-title-container">
                        <i class="fas fa-crown"></i>
                        <h2>Premium Patron Resources</h2>
                    </div>
                    <p class="section-description">
                        Unlock the full potential of your campaigns with these exclusive resources, available only to my amazing patrons.
                    </p>
                    <div class="project-grid">
                        <div class="project-card">
                            <img src="https://c10.patreonusercontent.com/4/patreon-media/p/post/131695695/041a5641ba1a4e6aa272bf3ad681376f/eyJ3IjoxMDgwfQ%3D%3D/1.png?token-hash=rekRR6BF_O9kyacdWftsr6OwFrUR29VUZeHJTAf7BGI%3D&token-time=1753574400" alt="Wilderness Encounter Tokens & Art">
                            <div class="project-card-content">
                                <h3>Wilderness Encounter Tokens & Art</h3>
                                <p>Enhanced encounter assets to bring your wilderness encounters to life.</p>
                                <a href="https://www.patreon.com/posts/new-wilderness-131695695" class="button button-warning" target="_blank">
                                    <i class="fas fa-arrow-right"></i> View Project
                                </a>
                            </div>
                        </div>
                        <div class="project-card">
                            <img src="https://c10.patreonusercontent.com/4/patreon-media/p/post/132347412/e49851972b044a73a377b4ff1ce522eb/eyJ3IjoxMDgwfQ%3D%3D/1.png?token-hash=Idp-S7UgiwAXP1l8dQeksPuPSzjcmWhYtwvKEZD6kNw%3D&token-time=1753574400" alt="Icewind Dale One-shot - The Fear, Silence & Snow">
                            <div class="project-card-content">
                                <h3>Icewind Dale One-shot: The Fear, Silence & Snow</h3>
                                <p>A complete one-shot adventure, with VTT maps for Roll20 & FoundryVTT coming soon!</p>
                                <a href="https://www.patreon.com/posts/fear-silence-one-132347412" class="button button-warning" target="_blank">
                                    <i class="fas fa-arrow-right"></i> View Project
                                </a>
                            </div>
                        </div>
                        <div class="project-card">
                            <div class="video-container">
                                <iframe
                                    src="https://www.youtube.com/embed/ezlGT370qTU?autoplay=1&mute=1&controls=0&loop=1&playlist=ezlGT370qTU"
                                    frameborder="0"
                                    allow="autoplay; encrypted-media"
                                    allowfullscreen
                                ></iframe>
                            </div>
                            <div class="project-card-content">
                                <h3>D&D Command Centre</h3>
                                <p>Powerful D&D tools for automating your prep both in-person and online.</p>
                                <a href="https://www.patreon.com/posts/exclusive-access-133747915" class="button button-warning" target="_blank">
                                    <i class="fas fa-arrow-right"></i> View Project
                                </a>
                            </div>
                        </div>
                        <div class="project-card">
                            <img src="https://i.imgur.com/bH2dQlJ.png" alt="D&D Initiative Tracker with API">
                            <div class="project-card-content">
                                <h3>D&D Initiative Tracker with API</h3>
                                <p>Effortless combatant management, intuitive initiative tracking, HP & conditions, and a built-in dice roller.</p>
                                <a href="https://dndtracker.nat20.live/" class="button button-warning" target="_blank">
                                    <i class="fas fa-arrow-right"></i> Launch App
                                </a>
                            </div>
                        </div>
                        <div class="project-card">
                            <img src="https://c10.patreonusercontent.com/4/patreon-media/p/post/131478506/9e7504da1c214ad8aa24c330e218d29d/eyJ3IjoxMDgwfQ%3D%3D/1.gif?token-hash=jeThcgtB3ynNOb8wg2BQrpabDJn-_Uk98RKERSJkNgY%3D&token-time=1753574400" alt="Foundry VTT GM Macros">
                            <div class="project-card-content">
                                <h3>Premium Icewind Dale Macros (Foundry VTT)</h3>
                                <p>Advanced macros for Foundry VTT, specifically designed to enhance your Icewind Dale campaigns.</p>
                                <a href="https://shorturl.at/5P9hk" class="button button-warning" target="_blank">
                                    <i class="fas fa-download"></i> Get Manifest URL
                                </a>
                            </div>
                        </div>
                    </div>
                </section>

                <hr class="section-divider">

                <section id="free-resources" class="free-resources-section card">
                    <div class="section-title-container">
                        <i class="fas fa-gift"></i>
                        <h2>Free Community Resources</h2>
                    </div>
                    <p class="section-description">
                        Enjoy these free tools and assets, crafted to elevate your D&D sessions.
                    </p>
                    <div class="project-grid">
                        <div class="project-card">
                            <img src="https://c10.patreonusercontent.com/4/patreon-media/p/post/131587088/efb624353eda416fa9dbf7d5b36939ed/eyJ3IjoxMD Throttle 80fQ%3D%3D/1.png?token-hash=9u4hFHSaWp9864InGazAubVbSTb5O-SrUJOjPzXsDSI%3D&token-time=1753574400" alt="Icewind Dale Posters">
                            <div class="project-card-content">
                                <h3>Icewind Dale Posters</h3>
                                <p>Atmospheric posters to enhance your campaign. Print them out or use them digitally!</p>
                                <a href="https://www.patreon.com/posts/new-drop-posters-131587088" class="button button-warning" target="_blank">
                                    <i class="fas fa-arrow-right"></i> View Project
                                </a>
                            </div>
                        </div>
                        <div class="project-card">
                            <img src="https://c10.patreonusercontent.com/4/patreon-media/p/post/131539068/2573e0e77921457f9368264bab6f49b1/eyJ3IjoxMDgwfQ%3D%3D/1.png?token-hash=w-K3BDMEXc6t8iUrB2aZXKmKsgWpfV6Uy4M6UkC89yE%3D&token-time=1753574400" alt="Bryn Shander Newspaper">
                            <div class="project-card-content">
                                <h3>Bryn Shander Newspaper</h3>
                                <p>Add some local flavor to your sessions with this immersive newspaper handout.</p>
                                <a href="https://www.patreon.com/posts/enhance-your-131539068" class="button button-warning" target="_blank">
                                    <i class="fas fa-arrow-right"></i> View Project
                                </a>
                            </div>
                        </div>
                        <div class="project-card">
                            <img src="https://c10.patreonusercontent.com/4/patreon-media/p/post/133582409/835166cbba474aca8eec047db313c89f/eyJ3IjoxMDgwfQ%3D%3D/1.png?token-hash=9lgcihFbkl4dGzb1DYy3tfNa1EaZE3dyJ3mCSePyxUI%3D&token-time=1753574400" alt="Bryn Shander Speakers Podium (3D Printable)">
                            <div class="project-card-content">
                                <h3>Bryn Shander Speakers Podium (3D Printable)</h3>
                                <p>A free 3D printable .OBJ file to bring your tabletop to life.</p>
                                <a href="https://www.patreon.com/posts/free-3d-asset-133582409" class="button button-warning" target="_blank">
                                    <i class="fas fa-download"></i> Download Asset
                                </a>
                            </div>
                        </div>
                        <div class="project-card">
                            <img src="https://i.imgur.com/q5TlC3I.png" alt="Black Cabin Art / Isometric">
                            <div class="project-card-content">
                                <h3>Black Cabin Art / Isometric</h3>
                                <p>Stunning art pieces to set the scene for your Black Cabin encounters.</p>
                                <a href="https://drive.google.com/file/d/1TSOXa9zK3p3pKIpkGZMKkEbkaiG74IKN/view?usp=drive_link" class="button button-warning" target="_blank">
                                    <i class="fas fa-arrow-right"></i> View Art 1
                                </a>
                                <a href="https://drive.google.com/file/d/1sD7b33rvN8lr5vKQKVAx0uJOtiPbP6gr/view?usp=drive_link" class="button button-warning" target="_blank" style="margin-top: 5px;">
                                    <i class="fas fa-arrow-right"></i> View Art 2
                                </a>
                            </div>
                        </div>
                        <div class="project-card">
                            <img src="https://i.imgur.com/kTmlInH.png" alt="Black Cabin Player Handout">
                            <div class="project-card-content">
                                <h3>Black Cabin Player Handout</h3>
                                <p>A chilling handout for players who meet an untimely demise in the Black Cabin.</p>
                                <a href="https://drive.google.com/file/d/1TSOXa9zK3p3pKIpkGZMKkEbkaiG74IKN/view?usp=drive_link" class="button button-warning" target="_blank">
                                    <i class="fas fa-arrow-right"></i> View Handout
                                </a>
                            </div>
                        </div>
                        <div class="project-card">
                            <img src="https://c10.patreonusercontent.com/4/patreon-media/p/post/131478506/9e7504da1c214ad8aa24c330e218d29d/eyJ3IjoxMDgwfQ%3D%3D/1.gif?token-hash=jeThcgtB3ynNOb8wg2BQrpabDJn-_Uk98RKERSJkNgY%3D&token-time=1753574400" alt="Foundry VTT GM Macros">
                            <div class="project-card-content">
                                <h3>Foundry VTT GM Macros</h3>
                                <p>Macros for light control, dice rolls, token teleporting, and streamlining travel for your Foundry VTT campaigns.</p>
                                <a href="http://tiny.cc/o8ym001" class="button button-warning" target="_blank">
                                    <i class="fas fa-download"></i> Get Manifest URL
                                </a>
                            </div>
                        </div>
                        <div class="project-card">
                            <img src="https://c10.patreonusercontent.com/4/patreon-media/p/post/131479029/bbb505a05a884230bd24c17d2078ac5a/eyJ3IjoxMDgwfQ%3D%3D/1.png?token-hash=UCtUp44a5mhICwDOqJRYqvUBv_a2kv9oG8JJi-K5E-Q%3D&token-time=1753574400" alt="Curse of Strahd DM Cheat Sheet (Web)">
                            <div class="project-card-content">
                                <h3>Curse of Strahd DM Cheat Sheet (Web)</h3>
                                <p>Quick reference for running CoS with nightmare mechanics, despair, and gaslighting techniques.</p>
                                <a href="http://cos-cheatsheet.nat20.live/" class="button button-warning" target="_blank">
                                    <i class="fas fa-arrow-right"></i> Launch Cheat Sheet
                                </a>
                            </div>
                        </div>
                        <div class="project-card">
                            <img src="https://c10.patreonusercontent.com/4/patreon-media/p/post/113877786/f426a3dc614944b0b5dc48afd6205b5a/eyJ3IjoxMDgwfQ%3D%3D/1.png?token-hash=UpVX6xkYicWKkWoUBiAsSySxDrZ1WVHi4eK84Kd2CeA%3D&token-time=1753574400" alt="Owlbear Rodeo NPC Realm Generator (Extension)">
                            <div class="project-card-content">
                                <h3>Owlbear Rodeo NPC Realm Generator (Extension)</h3>
                                <p>Generate NPCs on the fly for your Owlbear Rodeo sessions.</p>
                                <a href="https://raw.githubusercontent.com/Jimpeccable/NPC-Generator-OBR/refs/heads/NPC-Generator-OBR-1.0.2/manifest.json" class="button button-warning" target="_blank">
                                    <i class="fas fa-download"></i> Get Manifest URL
                                </a>
                            </div>
                        </div>
                        <div class="project-card">
                            <img src="https://c10.patreonusercontent.com/4/patreon-media/p/post/114950898/16a4aabe85cf453690868be5867293d5/eyJ3IjoxMDgwfQ%3D%3D/1.jpg?token-hash=MBYuiFxYg-Jqge8zyHjy1Xot8rPnk31gE3NZngNp7f8%3D&token-time=1753574400" alt="Art Dumping Ground">
                            <div class="project-card-content">
                                <h3>Art & AI Content Dumping Ground</h3>
                                <p>A collection of art and AI-generated content used in my campaigns, free for your use!</p>
                                <a href="https://drive.google.com/drive/folders/10MmCN3tf_rx6kELNKjxJXnlPXQndq37d?usp=sharing" class="button button-warning" target="_blank">
                                    <i class="fas fa-folder-open"></i> Access Drive
                                </a>
                            </div>
                        </div>
                    </div>
                </section>

                <hr class="section-divider">

                <section class="social-links-section card">
                    <div class="section-title-container">
                        <i class="fas fa-share-alt"></i>
                        <h2>Connect With Me</h2>
                    </div>
                    <div class="social-links">
                        <a href="https://patreon.com/Jimpeccable" target="_blank" aria-label="Patreon"><i class="fab fa-patreon"></i></a>
                        <a href="https://www.tiktok.com/@rollnat20" target="_blank" aria-label="TikTok"><i class="fab fa-tiktok"></i></a>
                    </div>
                </section>

                <hr class="section-divider">

                <footer class="footer-section card">
                    <div class="patreon-promo">
                        <p class="section-description">
                            If you find these resources helpful and wish to support my work, consider becoming a patron!
                            Your support helps me create more amazing content for the D&D community.
                        </p>
                        <a href="https://patreon.com/Jimpeccable" class="button patreon-button" target="_blank">
                            <i class="fab fa-patreon"></i> Support Me on Patreon
                        </a>
                    </div>
                    <p class="copyright-text">
                        Â© 2025 Jimpeccable. All rights reserved.
                    </p>
                </footer>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r134/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vanta@latest/dist/vanta.cells.min.js"></script>
    <script>
        // Initialize Vanta.js background
        VANTA.CELLS({
            el: "#vanta-background",
            mouseControls: true,
            touchControls: true,
            gyroControls: false,
            minHeight: 200.00,
            minWidth: 200.00,
            scale: 1.00,
            color1: 0x1A1A1A, // Darker color
            color2: 0x303030 // Lighter dark color
        });

// Simple SHA-256 implementation for GitHub Pages compatibility
function sha256(str) {
    function rightRotate(value, amount) {
        return (value >>> amount) | (value << (32 - amount));
    }
    
    function sha256Hash(ascii) {
        const mathPow = Math.pow;
        const maxWord = mathPow(2, 32);
        const lengthProperty = 'length';
        let i, j;
        let result = '';
        
        const words = [];
        const asciiBitLength = ascii[lengthProperty] * 8;
        
        let hash = sha256Hash.h = sha256Hash.h || [];
        const k = sha256Hash.k = sha256Hash.k || [];
        let primeCounter = k[lengthProperty];
        
        const isComposite = {};
        for (let candidate = 2; primeCounter < 64; candidate++) {
            if (!isComposite[candidate]) {
                for (i = 0; i < 313; i += candidate) {
                    isComposite[i] = candidate;
                }
                hash[primeCounter] = (mathPow(candidate, .5) * maxWord) | 0;
                k[primeCounter++] = (mathPow(candidate, 1 / 3) * maxWord) | 0;
            }
        }
        
        ascii += '\x80';
        while (ascii[lengthProperty] % 64 - 56) ascii += '\x00';
        for (i = 0; i < ascii[lengthProperty]; i++) {
            j = ascii.charCodeAt(i);
            if (j >> 8) return;
            words[i >> 2] |= j << ((3 - i) % 4) * 8;
        }
        words[words[lengthProperty]] = ((asciiBitLength / maxWord) | 0);
        words[words[lengthProperty]] = (asciiBitLength);
        
        for (j = 0; j < words[lengthProperty];) {
            const w = words.slice(j, j += 16);
            const oldHash = hash;
            hash = hash.slice(0, 8);
            
            for (i = 0; i < 64; i++) {
                const i2 = i + j;
                const w15 = w[i - 15], w2 = w[i - 2];
                
                const a = hash[0], e = hash[4];
                const temp1 = hash[7]
                    + (rightRotate(e, 6) ^ rightRotate(e, 11) ^ rightRotate(e, 25))
                    + ((e & hash[5]) ^ ((~e) & hash[6]))
                    + k[i]
                    + (w[i] = (i < 16) ? w[i] : (
                        w[i - 16]
                        + (rightRotate(w15, 7) ^ rightRotate(w15, 18) ^ (w15 >>> 3))
                        + w[i - 7]
                        + (rightRotate(w2, 17) ^ rightRotate(w2, 19) ^ (w2 >>> 10))
                    ) | 0
                    );
                const temp2 = (rightRotate(a, 2) ^ rightRotate(a, 13) ^ rightRotate(a, 22))
                    + ((a & hash[1]) ^ (a & hash[2]) ^ (hash[1] & hash[2]));
                
                hash = [(temp1 + temp2) | 0].concat(hash);
                hash[4] = (hash[4] + temp1) | 0;
            }
            
            for (i = 0; i < 8; i++) {
                hash[i] = (hash[i] + oldHash[i]) | 0;
            }
        }
        
        for (i = 0; i < 8; i++) {
            for (j = 3; j + 1; j--) {
                const b = (hash[i] >> (j * 8)) & 255;
                result += ((b < 16) ? 0 : '') + b.toString(16);
            }
        }
        return result;
    }
    
    return sha256Hash(str);
}

// Try the most likely secret key based on your original code
const MONTHLY_CODE_SECRET = "D&DTrackerSecretKey2025!";

function generateMonthlyCode() {
    const date = new Date();
    const year = date.getFullYear();
    const month = (date.getMonth() + 1).toString().padStart(2, '0');
    
    const inputString = `${MONTHLY_CODE_SECRET}-${year}-${month}`;
    const hexHash = sha256(inputString);
    
    // Extract only alphanumeric characters and take first 8
    const alphanumericHash = hexHash.replace(/[^a-zA-Z0-9]/g, '');
    return alphanumericHash.substring(0, 8).toUpperCase();
}

// Generate the code
console.log("Generated code:", generateMonthlyCode());

        // Function to update the displayed code
        function updateMonthlyCodeDisplay() {
            const codeDisplayElement = document.getElementById('monthlyCodeDisplay');
            codeDisplayElement.textContent = generateMonthlyCode();
        }

        // Function to copy the code to clipboard
        function copyCode() {
            const codeDisplayElement = document.getElementById('monthlyCodeDisplay');
            const code = codeDisplayElement.textContent;

            // Use document.execCommand('copy') for better compatibility in iframes
            const tempInput = document.createElement('textarea');
            tempInput.value = code;
            document.body.appendChild(tempInput);
            tempInput.select();
            document.execCommand('copy');
            document.body.removeChild(tempInput);

            // Provide visual feedback
            const originalText = codeDisplayElement.textContent;
            codeDisplayElement.textContent = 'COPIED!';
            setTimeout(() => {
                codeDisplayElement.textContent = originalText;
            }, 1500); // Revert after 1.5 seconds
        }

        // Initial code display on load
        document.addEventListener('DOMContentLoaded', updateMonthlyCodeDisplay);

        // Set up interval to update code at the start of each month (or daily for testing/robustness)
        // Check once every 24 hours. This client-side check is a fallback; server-side generation is ideal for strict monthly refresh.
        setInterval(() => {
            const currentDate = new Date();
            const currentMonthUTC = currentDate.getUTCMonth();
            const currentYearUTC = currentDate.getUTCFullYear();

            // Store the last month/year the code was generated for (using UTC for consistency)
            const lastGeneratedMonthUTC = localStorage.getItem('lastGeneratedMonthUTC');
            const lastGeneratedYearUTC = localStorage.getItem('lastGeneratedYearUTC');

            if (currentMonthUTC.toString() !== lastGeneratedMonthUTC || currentYearUTC.toString() !== lastGeneratedYearUTC) {
                updateMonthlyCodeDisplay();
                localStorage.setItem('lastGeneratedMonthUTC', currentMonthUTC.toString());
                localStorage.setItem('lastGeneratedYearUTC', currentYearUTC.toString());
            }
        }, 1000 * 60 * 60 * 24); // Check once every 24 hours

        // On initial load, set the last generated month/year if not already set
        if (!localStorage.getItem('lastGeneratedMonthUTC')) {
            const date = new Date();
            localStorage.setItem('lastGeneratedMonthUTC', date.getUTCMonth().toString());
            localStorage.setItem('lastGeneratedYearUTC', date.getUTCFullYear().toString());
        }
    </script>
</body>
</html>
